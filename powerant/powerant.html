<html>

<head>
	<meta charset="UTF-8">
	<title>Powerant Manager</title>
	<style>
		/* basic reset */
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		html {
			height: 100%;
			background: linear-gradient(rgba(0, 0, 0, 0.723), rgba(0, 0, 0, 0.8));
		}

		body {
			font-family: 'Montserrat', Arial, Verdana;
			color: white;
			overflow-x: hidden;
		}

		/* form styles */
		#msform {
			width: 90%;
			max-width: 90vw;
			/* Relative max-width */
			margin: 1vw auto;
			text-align: center;
			position: relative;
		}

		#device-selector-container {
			position: fixed;
			left: 50%;
			bottom: 0;
			transform: translateX(-50%);
			width: 100%;
			text-align: center;
		}

		#msform fieldset {
			background: #333;
			border: none;
			border-radius: 3px;
			box-shadow: 0 0 2vw 1vw rgba(0, 0, 0, 0.4);
			padding: 4vw;
			width: 100%;
			margin: 0;
			/* stacking fieldsets above each other */
			position: absolute;
		}

		/* Hide all except second fieldset */
		#msform fieldset:not(:nth-of-type(2)) {
			display: none;
		}

		/* inputs */
		#msform input,
		#msform textarea,
		#msform select {
			padding: 3vw;
			border: 0.5vw solid #666;
			border-radius: 3px;
			margin-bottom: 4vw;
			width: 80%;
			font-family: 'Montserrat';
			color: white;
			font-size: 3vw;
			background: #222;
		}

		/* headings */
		.fs-title {
			font-size: 4.5vw;
			text-transform: uppercase;
			color: #27AE60;
			margin-bottom: 4vw;
		}

		.fs-subtitle {
			font-weight: normal;
			font-size: 3.5vw;
			color: #999;
			margin-bottom: 8vw;
		}

		/* progressbar */
		#progressbar {
			margin-bottom: 1vw;
			margin-top: 5vw;
			overflow: hidden;
			/* CSS counters to number the steps */
			counter-reset: step;
			list-style-type: none;
			display: flex;
			justify-content: space-between;
			align-items: center;
			border-radius: 5px;
		}

		#progressbar li {
			color: white;
			text-transform: uppercase;
			font-size: 2.5vw;
			width: 100%;
			position: relative;
			background: white;
			color: #333;

		}

		#progressbar li:before {
			content: var(--date);
			height: 6vw;
			line-height: 6vw;
			display: block;
			font-size: 5vw;
			color: #333;
			background: white;
			border-radius: 5;
			margin: 0 auto 0vw auto;

		}

		/* New classes for the slide animations */
		.slide-left {
			transform: translateX(-100%);
			transition: transform 400ms ease-in-out;
		}

		.slide-right {
			transform: translateX(100%);
			transition: transform 400ms ease-in-out;
		}

		.slide-reset {
			transform: translateX(0);
			transition: none;
		}
	</style>
</head>

<body>
	<!-- multistep form -->
	<form id="msform" action='/connect' method='post'>
		<br><br>
		<img src="powerant-logo.png" alt="HTML" width="80%">
		<!-- progressbar -->
		<ul id="progressbar">
			<li id="yesterday-menu">Yesterday</li>
			<li class="active" id="today-menu">Today</li>
			<li id="tomorrow-menu">Tomorrow</li>
		</ul>
		<!-- fieldsets -->
		<fieldset>
			<h2 id="yesterday-title" class="fs-title">Yesterday</h2>
			<h3 id="yesterday-subtitle" class="fs-subtitle">No device is selected. Select one from below. </h3>
		</fieldset>
		<fieldset class="current">
			<h2 id="today-title" class="fs-title">Today!</h2>
			<h3 id="today-subtitle" class="fs-subtitle">No device is selected. Select one from below. </h3>
		</fieldset>
		<fieldset>
			<h2 id="tomorrow-title" class="fs-title">Tomorrow</h2>
			<h3 id="tomorrow-subtitle" class="fs-subtitle">No device is selected. Select one from below. </h3>
		</fieldset>
		<!-- Add this right above your <form> -->
		<div id="device-selector-container">
			<select id="device-selector">
				<option id="device-selection-text" value="default">Select Device</option>
				<option id="add-device-text" value="add-device">Add Device</option>
			</select>
		</div>
	</form>
	<script>

		var current_fs, next_fs, previous_fs;
		var animating = false;
		var xStart = null;
		let currentFieldsetIndex = 1; // You start at index 1, which is the second fieldset

		// Initialize the "current" fieldset
		var fieldsets = document.querySelectorAll('fieldset');
		fieldsets[1].classList.add('current');

		function handleTouchStart(evt) {
			xStart = evt.touches[0].clientX;
		}

		function handleTouchMove(evt) {
			if (!xStart) {
				return;
			}

			var xDiff = xStart - evt.touches[0].clientX;

			if (xDiff > 50) {
				moveFieldset('next');
				xStart = null;
			} else if (xDiff < -50) {
				moveFieldset('previous');
				xStart = null;
			}
		}

		function handleTouchEnd(evt) {
			xStart = null;
		}

		// Add touch event listeners
		document.addEventListener('touchstart', handleTouchStart, false);
		document.addEventListener('touchmove', handleTouchMove, false);
		document.addEventListener('touchend', handleTouchEnd, false);
		function moveFieldset(direction) {
			if (animating) return false;
			animating = true;

			let fieldsets = document.querySelectorAll('fieldset');
			let currentFieldset = fieldsets[currentFieldsetIndex];
			let progressbar = document.getElementById('progressbar');

			if (direction === 'next' && currentFieldsetIndex < fieldsets.length - 1) {

				currentFieldset.classList.add('slide-left');

				setTimeout(function () {
					currentFieldset.classList.remove('slide-left');
					currentFieldset.style.display = 'none';

					currentFieldsetIndex++;
					let nextFieldset = fieldsets[currentFieldsetIndex];
					nextFieldset.style.display = 'block';
					nextFieldset.classList.add('slide-reset');

					progressbar.children[currentFieldsetIndex].classList.add('active');

					setTimeout(function () {
						nextFieldset.classList.remove('slide-reset');
						animating = false;
					}, 0);

				}, 400);

			} else if (direction === 'previous' && currentFieldsetIndex > 0) {

				currentFieldset.classList.add('slide-right');

				setTimeout(function () {
					currentFieldset.classList.remove('slide-right');
					currentFieldset.style.display = 'none';

					currentFieldsetIndex--;
					let previousFieldset = fieldsets[currentFieldsetIndex];
					previousFieldset.style.display = 'block';
					previousFieldset.classList.add('slide-reset');

					progressbar.children[currentFieldsetIndex + 1].classList.remove('active');

					setTimeout(function () {
						previousFieldset.classList.remove('slide-reset');
						animating = false;
					}, 0);

				}, 400);

			} else {
				animating = false;
			}
		}

		document.addEventListener('DOMContentLoaded', () => {
			const listItems = document.querySelectorAll('#progressbar li');
			const dateOffsets = [-1, 0, 1];  // Yesterday, today, and tomorrow

			listItems.forEach((li, index) => {
				if (index < dateOffsets.length) {
					const date = new Date();
					date.setDate(date.getDate() + dateOffsets[index]);
					const day = String(date.getDate());
					const month = String(date.getMonth() + 1);
					const formattedDate = `"${day}.${month}"`;  // Quote the string for valid CSS content
					li.style.setProperty('--date', formattedDate);
				}
			});
		});


	</script>
</body>

</html>